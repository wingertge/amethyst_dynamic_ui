<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `UnindexedProducer` trait in crate `amethyst_core`."><meta name="keywords" content="rust, rustlang, rust-lang, UnindexedProducer"><title>amethyst_core::ecs::rayon::iter::plumbing::UnindexedProducer - Rust</title><link rel="stylesheet" type="text/css" href="../../../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../../../ayu.css" disabled ><script id="default-settings"></script><script src="../../../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../../../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../../../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../../../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../../../../down-arrow.svg");}</style></head><body class="rustdoc trait"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../../../amethyst_core/index.html'><div class='logo-container rust-logo'><img src='../../../../../rust-logo.png' alt='logo'></div></a><p class="location">Trait UnindexedProducer</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#associated-types">Associated Types</a><div class="sidebar-links"><a href="#associatedtype.Item">Item</a></div><a class="sidebar-title" href="#required-methods">Required Methods</a><div class="sidebar-links"><a href="#tymethod.fold_with">fold_with</a><a href="#tymethod.split">split</a></div><a class="sidebar-title" href="#implementors">Implementors</a></div><p class="location"><a href="../../../../index.html">amethyst_core</a>::<wbr><a href="../../../index.html">ecs</a>::<wbr><a href="../../index.html">rayon</a>::<wbr><a href="../index.html">iter</a>::<wbr><a href="index.html">plumbing</a></p><script>window.sidebarCurrent = {name: "UnindexedProducer", ty: "trait", relpath: ""};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../../../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><script src="../../../../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../../../../../settings.html"><img src="../../../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../../../../src/rayon/iter/plumbing/mod.rs.html#236-248" title="goto source code">[src]</a></span><span class="in-band">Trait <a href="../../../../index.html">amethyst_core</a>::<wbr><a href="../../../index.html">ecs</a>::<wbr><a href="../../index.html">rayon</a>::<wbr><a href="../index.html">iter</a>::<wbr><a href="index.html">plumbing</a>::<wbr><a class="trait" href="">UnindexedProducer</a></span></h1><div class="docblock type-decl hidden-by-usual-hider"><pre class="rust trait">pub trait UnindexedProducer: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> {
    type <a href="#associatedtype.Item" class="type">Item</a>;
    pub fn <a href="#tymethod.split" class="fnname">split</a>(self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a>Self, <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self&gt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>;
<div class="item-spacer"></div>    pub fn <a href="#tymethod.fold_with" class="fnname">fold_with</a>&lt;F&gt;(self, folder: F) -&gt; F<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="../../../../../amethyst_core/ecs/rayon/iter/plumbing/trait.Folder.html" title="trait amethyst_core::ecs::rayon::iter::plumbing::Folder">Folder</a>&lt;Self::<a class="type" href="../../../../../amethyst_core/ecs/rayon/iter/plumbing/trait.UnindexedProducer.html#associatedtype.Item" title="type amethyst_core::ecs::rayon::iter::plumbing::UnindexedProducer::Item">Item</a>&gt;</span>;
}</pre></div><div class="docblock"><p>A variant on <code>Producer</code> which does not know its exact length or
cannot represent it in a <code>usize</code>. These producers act like
ordinary producers except that they cannot be told to split at a
particular point. Instead, you just ask them to split 'somewhere'.</p>
<p>(In principle, <code>Producer</code> could extend this trait; however, it
does not because to do so would require producers to carry their
own length with them.)</p>
</div><h2 id="associated-types" class="small-section-header">Associated Types<a href="#associated-types" class="anchor"></a></h2><div class="methods"><h3 id="associatedtype.Item" class="method"><code>type <a href="#associatedtype.Item" class="type">Item</a></code><a class="srclink" href="../../../../../src/rayon/iter/plumbing/mod.rs.html#238" title="goto source code">[src]</a></h3><div class="docblock"><p>The type of item returned by this producer.</p>
</div></div><span class="loading-content">Loading content...</span><h2 id="required-methods" class="small-section-header">Required methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><h3 id="tymethod.split" class="method"><code>pub fn <a href="#tymethod.split" class="fnname">split</a>(self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a>Self, <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self&gt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a></code><a class="srclink" href="../../../../../src/rayon/iter/plumbing/mod.rs.html#241" title="goto source code">[src]</a></h3><div class="docblock"><p>Split midway into a new producer if possible, otherwise return <code>None</code>.</p>
</div><h3 id="tymethod.fold_with" class="method"><code>pub fn <a href="#tymethod.fold_with" class="fnname">fold_with</a>&lt;F&gt;(self, folder: F) -&gt; F <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="../../../../../amethyst_core/ecs/rayon/iter/plumbing/trait.Folder.html" title="trait amethyst_core::ecs::rayon::iter::plumbing::Folder">Folder</a>&lt;Self::<a class="type" href="../../../../../amethyst_core/ecs/rayon/iter/plumbing/trait.UnindexedProducer.html#associatedtype.Item" title="type amethyst_core::ecs::rayon::iter::plumbing::UnindexedProducer::Item">Item</a>&gt;,&nbsp;</span></code><a class="srclink" href="../../../../../src/rayon/iter/plumbing/mod.rs.html#245-247" title="goto source code">[src]</a></h3><div class="docblock"><p>Iterate the producer, feeding each element to <code>folder</code>, and
stop when the folder is full (or all elements have been consumed).</p>
</div></div><span class="loading-content">Loading content...</span><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"><h3 id="impl-UnindexedProducer" class="impl"><code class="in-band">impl&lt;'a, T&gt; UnindexedProducer for <a class="struct" href="../../../../../amethyst_core/ecs/hibitset/struct.BitProducer.html" title="struct amethyst_core::ecs::hibitset::BitProducer">BitProducer</a>&lt;'a, T&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'a + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + <a class="trait" href="../../../../../amethyst_core/ecs/hibitset/trait.BitSetLike.html" title="trait amethyst_core::ecs::hibitset::BitSetLike">BitSetLike</a>,&nbsp;</span></code><a href="#impl-UnindexedProducer" class="anchor"></a><a class="srclink" href="../../../../../src/hibitset/iter/parallel.rs.html#77-168" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="associatedtype.Item-1" class="type"><code>type <a href="#associatedtype.Item-1" class="type">Item</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a></code></h4><h4 id="method.split" class="method"><code>pub fn <a href="#method.split" class="fnname">split</a>(self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a><a class="struct" href="../../../../../amethyst_core/ecs/hibitset/struct.BitProducer.html" title="struct amethyst_core::ecs::hibitset::BitProducer">BitProducer</a>&lt;'a, T&gt;, <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../../../amethyst_core/ecs/hibitset/struct.BitProducer.html" title="struct amethyst_core::ecs::hibitset::BitProducer">BitProducer</a>&lt;'a, T&gt;&gt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a></code><a class="srclink" href="../../../../../src/hibitset/iter/parallel.rs.html#111-160" title="goto source code">[src]</a></h4><div class="docblock"><p>How the splitting is done:</p>
<ol>
<li>
<p>First the highest layer that has at least one set bit
is searched.</p>
</li>
<li>
<p>If the layer that was found, has only one bit that's set,
it's cleared. After that the correct prefix for the cleared
bit is figured out and the descending is continued.</p>
</li>
<li>
<p>If the layer that was found, has more than one bit that's set,
a mask is created that splits it's set bits as close to half
as possible.
After creating the mask the layer is masked by either the mask
or it's complement constructing two distinct producers which
are then returned.</p>
</li>
<li>
<p>If there isn't any layers that have more than one set bit,
splitting doesn't happen.</p>
</li>
</ol>
<p>The actual iteration is performed by the sequential iterator
<code>BitIter</code> which internals are modified by this splitting
algorithm.</p>
<p>This splitting strategy should split work evenly if the set bits
are distributed close to uniformly random.
As the strategy only looks one layer at the time, if there are subtrees
that have lots of work and sibling subtrees that have little of work,
then it will produce non-optimal splittings.</p>
</div><h4 id="method.fold_with" class="method hidden"><code>pub fn <a href="#method.fold_with" class="fnname">fold_with</a>&lt;F&gt;(self, folder: F) -&gt; F <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="../../../../../amethyst_core/ecs/rayon/iter/plumbing/trait.Folder.html" title="trait amethyst_core::ecs::rayon::iter::plumbing::Folder">Folder</a>&lt;&lt;<a class="struct" href="../../../../../amethyst_core/ecs/hibitset/struct.BitProducer.html" title="struct amethyst_core::ecs::hibitset::BitProducer">BitProducer</a>&lt;'a, T&gt; as <a class="trait" href="../../../../../amethyst_core/ecs/rayon/iter/plumbing/trait.UnindexedProducer.html" title="trait amethyst_core::ecs::rayon::iter::plumbing::UnindexedProducer">UnindexedProducer</a>&gt;::<a class="type" href="../../../../../amethyst_core/ecs/rayon/iter/plumbing/trait.UnindexedProducer.html#associatedtype.Item" title="type amethyst_core::ecs::rayon::iter::plumbing::UnindexedProducer::Item">Item</a>&gt;,&nbsp;</span></code><a class="srclink" href="../../../../../src/hibitset/iter/parallel.rs.html#162-167" title="goto source code">[src]</a></h4></div></div><span class="loading-content">Loading content...</span><script type="text/javascript" src="../../../../../implementors/rayon/iter/plumbing/trait.UnindexedProducer.js" async></script></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../../../../";window.currentCrate = "amethyst_core";</script><script src="../../../../../main.js"></script><script defer src="../../../../../search-index.js"></script></body></html>